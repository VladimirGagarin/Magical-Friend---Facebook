let deferredPrompt;function hideInstallButtons(){const e=document.getElementById("install-button"),t=document.getElementById("cancel-button");e.classList.add("hiddened"),t.classList.add("hiddened")}function showInstallButtons(){const e=document.getElementById("install-button"),t=document.getElementById("cancel-button");e.classList.remove("hiddened"),t.classList.remove("hiddened")}function checkOnlineStatus(){navigator.onLine||(window.location.href="popup.html")}document.addEventListener("DOMContentLoaded",(()=>{setTimeout((()=>{document.getElementById("magicload").style.display="none",document.body.style.overflow="auto"}),2e3)})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("nav ul li a[data-tooltip]").forEach((e=>{e.addEventListener("mouseover",(()=>{e.classList.add("show-tooltip")})),e.addEventListener("mouseout",(()=>{e.classList.remove("show-tooltip")}))}))})),document.getElementById("menu").addEventListener("click",(function(){document.querySelector(".floating-nav").classList.toggle("show-menu")})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll("nav ul li a"),t=document.querySelectorAll(".section");e.forEach((n=>{n.addEventListener("click",(a=>{a.preventDefault();const o=n.getAttribute("href").substring(1);localStorage.setItem("activeSection",o),window.location.reload(),e.forEach((e=>e.classList.remove("active"))),n.classList.add("active"),t.forEach((e=>{e.id===o?e.classList.add("active"):e.classList.remove("active")}))}))}));const n=localStorage.getItem("activeSection")||"home";t.forEach((e=>{e.id===n?e.classList.add("active"):e.classList.remove("active")})),e.forEach((e=>{e.getAttribute("href").substring(1)===n?e.classList.add("active"):e.classList.remove("active")}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("logo-magical-friend"),t=document.getElementById("about-magical-friend"),n=document.querySelector(".about-magical-friend .about-close"),a=document.getElementById("about-text");let o=!1,i=!1;function s(){o||i||setTimeout((()=>{t.style.display="block",setTimeout((()=>{!function(){const e=localStorage.getItem("selectedLanguage")||"en";fetch(`${e}.json`).then((e=>e.json())).then((e=>{e["aboutText"];r(a)})).catch((e=>{console.error("Error loading translation:",e),r("Magical Friend partners in friendship with Facebook, bringing magical moments to your social networking experience.",a)}))}()}),1e3)}),2e3)}function r(e,t){o=!0;let n=0;!function a(){n<e.length?(t.textContent+=e.charAt(n),n++,setTimeout(a,50)):(o=!1,i=!0)}()}e.addEventListener("mouseenter",s),e.addEventListener("touchstart",s),n.addEventListener("click",(function(){t.style.display="none",a.textContent="",o=!1,i=!1}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("owner-form"),t=document.getElementById("image"),n=document.getElementById("image-preview"),a=document.getElementById("owner-details"),o=document.getElementById("Profile"),i=document.querySelector(".owner-form-container");const s=localStorage.getItem("myself");if(s){const e=JSON.parse(s);r(e),d(e),l(e)}else o.innerHTML='<h2 data-translate="No Profile Yet">No Profile Yet</h2>';function r(t){e.style.display="none",i.style.display="none";const n=document.querySelector('nav ul li a[href="#Profile"]'),o=document.querySelector('nav ul li a[href="#Profile"] img');n.innerHTML=`<img src="${t.image}" alt="${t.facebookName}">`,o.src=t.image,a.innerHTML=`<li><a href="#Profile" data-tooltip="Me"><img src="${t.image}" alt="${t.facebookName}"></a></li>`}function d(e){document.querySelector('nav ul li a[href="#Profile"]').innerHTML=`<img src="${e.image}" alt="${e.facebookName}">`}function l(e){o.innerHTML=`\n        <button id="edit-profile" data-translate="Edit Profile">Edit Profile</button>\n        <h2>${e.facebookName}</h2>\n        <img src="${e.image}" alt="${e.facebookName}">\n        <p>${e.bio}</p>\n        <button id="log-out" data-translate="Log Out">Log Out</button>\n        `;document.getElementById("edit-profile").addEventListener("click",(()=>{!function(e){o.innerHTML=`\n        <div class="owner-form-container">\n            <h3 data-translate="Edit Profile">Edit Profile</h3>\n            <form id="edit-profile-form">\n            <div class="form-group">\n                <label for="edit-facebook-name" data-translate="Facebook Name">Facebook Name</label>\n                <input type="text" id="edit-facebook-name" name="edit-facebook-name" value="${e.facebookName}" required>\n            </div>\n            <div class="form-group">\n                <label for="edit-image" data-translate="Profile Picture">Profile Picture</label>\n                <input type="file" id="edit-image" name="edit-image" accept="image/*">\n                <div class="image-overview" id="edit-image-preview"></div>\n            </div>\n            <div class="form-group">\n                <label for="edit-bio" data-translate="Bio">Bio</label>\n                <textarea id="edit-bio" name="edit-bio" rows="4" required>${e.bio}</textarea>\n            </div>\n            <div class="button-group">\n                <button type="button" id="cancel-edit" data-translate="Cancel">Cancel</button>\n                <button type="submit" id="save-edit" data-translate = "Save">Save</button>\n            </div>\n            </form>\n        </div>\n        `;document.getElementById("cancel-edit").addEventListener("click",(()=>{l(e),location.reload()}));const t=document.getElementById("edit-image"),n=document.getElementById("edit-image-preview");t.addEventListener("change",(()=>{const e=t.files[0];if(e){const t=new FileReader;t.onload=()=>{n.innerHTML=`<img src="${t.result}" alt="Image Preview">`},t.readAsDataURL(e)}}));document.getElementById("edit-profile-form").addEventListener("submit",(t=>{t.preventDefault(),function(e){const t=document.getElementById("edit-facebook-name").value,n=document.getElementById("edit-bio").value,a=document.getElementById("edit-image").files[0];if(a){const e=new FileReader;e.readAsDataURL(a),e.onload=()=>{const a={facebookName:t,image:e.result,bio:n};localStorage.setItem("myself",JSON.stringify(a)),r(a),l(a)}}else{const a={facebookName:t,image:e.image,bio:n};localStorage.setItem("myself",JSON.stringify(a)),r(a),l(a)}}(e),window.location.reload()}))}(e)}));document.getElementById("log-out").addEventListener("click",(function(){localStorage.clear(),function(e){const t=localStorage.getItem("selectedLanguage")||"en";fetch(`${t}.json`).then((e=>e.json())).then((t=>{const n=t[e]||"Default message";alert(n)})).catch((e=>{console.error("Error loading translation:",e),alert("You have been logged out.")}))}("alert_logout"),location.reload()}))}e.addEventListener("submit",(e=>{e.preventDefault();const n=document.getElementById("facebook-name").value,a=document.getElementById("bio").value,o=t.files[0];if(o){const e=new FileReader;e.readAsDataURL(o),e.onload=()=>{const t={facebookName:n,bio:a,image:e.result};localStorage.setItem("myself",JSON.stringify(t)),r(t),d(t),l(t),window.location.reload()}}})),t.addEventListener("change",(()=>{const e=t.files[0];if(e){const t=new FileReader;t.onload=()=>{n.innerHTML=`<img src="${t.result}" alt="Image Preview">`},t.readAsDataURL(e)}}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("quote-text");(async function(){const e=localStorage.getItem("selectedLanguage")||"en";return fetch(`${e}.json`).then((e=>e.json())).catch((e=>(console.error("Error fetching translations:",e),{})))})().then((t=>{const n="No FAQs available. Check out our FAQs!";e.textContent=t[n]||n;const a=document.createElement("div");a.classList.add("faq-container"),[{question:"What is Magical Friend?",answer:"Magical Friend is a unique interactive experience where you can create and customize animated cubes with images of your friends, accompanied by music and animations."},{question:"How can I create a Magical Friend?",answer:"To create a Magical Friend, simply upload images of your friends and customize the animated cubes using our intuitive interface. Add music and animations to make it truly magical!"},{question:"Is Magical Friend associated with Facebook?",answer:"No, Magical Friend is a standalone web application. While you can upload images from your device, there is no direct integration with Facebook or any other social media platform."},{question:"Can I share my Magical Friend creations?",answer:"Yes, you can share your Magical Friend creations by downloading them as videos or images. Share them with your friends and family to spread the magic!"},{question:"Is there a cost to use Magical Friend?",answer:"Magical Friend is completely free to use! Enjoy creating and sharing magical moments with your friends without any costs."},{question:"Can I save my Magical Friend creations?",answer:"Yes, you can save your Magical Friend creations locally on your device. This allows you to revisit and edit them whenever you like."},{question:"Are there limits to how many friends' images I can use?",answer:"There are no strict limits on the number of friends' images you can use. However, the performance may vary based on the number and size of images."},{question:"Can I customize the animations and music in my Magical Friend?",answer:"Absolutely! Magical Friend offers customization options for animations and music. You can choose from a selection of themes and music tracks to suit your creation."},{question:"Is Magical Friend suitable for children?",answer:"Yes, Magical Friend is designed to be family-friendly and suitable for users of all ages. It provides a safe and creative environment for expressing friendship."},{question:"How often are new features added to Magical Friend?",answer:"We strive to continuously improve Magical Friend by adding new features and enhancements. Stay tuned for updates and exciting new capabilities!"}].forEach((e=>{const n=document.createElement("div");n.classList.add("faq-item");const o=document.createElement("div");o.classList.add("faq-question"),o.textContent=t[e.question]||e.question;const i=document.createElement("div");i.classList.add("faq-answer"),i.textContent=t[e.answer]||e.answer,i.style.display="none",o.addEventListener("click",(()=>{i.style.display="none"===i.style.display?"block":"none",function(e){const t=e.textContent;e.textContent="";let n=0;const a=50;function o(){n<t.length&&(e.textContent+=t.charAt(n),n++,setTimeout(o,a))}o()}(i)})),n.appendChild(o),n.appendChild(i),a.appendChild(n)})),e.innerHTML="",e.appendChild(a)}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".tic-tac-toe .cell"),t=JSON.parse(localStorage.getItem("myself")),n=t?t.facebookName:"Player";let a=n,o=["","","","","","","","",""],i=0,s=0;const r=()=>t?t.image:null,d={English:{winMessage:"wins!",drawMessage:"It's a draw!",computerWinMessage:"Computer (X) wins!",scoreLabel:"Player: {playerWins} - Computer: {computerWins}",resetGame:"Reset Game"},Spanish:{winMessage:"Â¡gana!",drawMessage:"Â¡Es un empate!",computerWinMessage:"Â¡La computadora (X) gana!",scoreLabel:"Jugador: {playerWins} - Computadora: {computerWins}",resetGame:"Reiniciar juego"},German:{winMessage:"gewinnt!",drawMessage:"Es ist ein Unentschieden!",computerWinMessage:"Computer (X) gewinnt!",scoreLabel:"Spieler: {playerWins} - Computer: {computerWins}",resetGame:"Spiel zurÃ¼cksetzen"},Greek:{winMessage:"ÎºÎµÏÎ´Î¯Î¶ÎµÎ¹!",drawMessage:"Î•Î¯Î½Î±Î¹ Î¹ÏƒÎ¿Ï€Î±Î»Î¯Î±!",computerWinMessage:"ÎŸ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚ (X) ÎºÎµÏÎ´Î¯Î¶ÎµÎ¹!",scoreLabel:"Î Î±Î¯ÎºÏ„Î·Ï‚: {playerWins} - Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚: {computerWins}",resetGame:"Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Ï€Î±Î¹Ï‡Î½Î¹Î´Î¹Î¿Ï"},Italian:{winMessage:"vince!",drawMessage:"Ãˆ un pareggio!",computerWinMessage:"Il computer (X) vince!",scoreLabel:"Giocatore: {playerWins} - Computer: {computerWins}",resetGame:"Ripristina gioco"},Portuguese:{winMessage:"vence!",drawMessage:"Ã‰ um empate!",computerWinMessage:"O computador (X) vence!",scoreLabel:"Jogador: {playerWins} - Computador: {computerWins}",resetGame:"Redefinir jogo"},Russian:{winMessage:"Ð¿Ð¾Ð±ÐµÐ¶Ð´Ð°ÐµÑ‚!",drawMessage:"ÐÐ¸Ñ‡ÑŒÑ!",computerWinMessage:"ÐšÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€ (X) Ð¿Ð¾Ð±ÐµÐ¶Ð´Ð°ÐµÑ‚!",scoreLabel:"Ð˜Ð³Ñ€Ð¾Ðº: {playerWins} - ÐšÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€: {computerWins}",resetGame:"Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð¸Ð³Ñ€Ñƒ"},Arabic:{winMessage:"ÙŠÙÙˆØ²!",drawMessage:"Ø¥Ù†Ù‡Ø§ ØªØ¹Ø§Ø¯Ù„!",computerWinMessage:"Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (X) ÙŠÙÙˆØ²!",scoreLabel:"Ø§Ù„Ù„Ø§Ø¹Ø¨: {playerWins} - Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: {computerWins}",resetGame:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø©"},Bengali:{winMessage:"à¦œà§‡à¦¤à§‡!",drawMessage:"à¦à¦Ÿà¦¿ à¦à¦•à¦Ÿà¦¿ à¦¡à§à¦°!",computerWinMessage:"à¦•à¦®à§à¦ªà¦¿à¦‰à¦Ÿà¦¾à¦° (X) à¦œà§‡à¦¤à§‡!",scoreLabel:"à¦–à§‡à¦²à§‹à¦¯à¦¼à¦¾à¦¡à¦¼: {playerWins} - à¦•à¦®à§à¦ªà¦¿à¦‰à¦Ÿà¦¾à¦°: {computerWins}",resetGame:"à¦—à§‡à¦® à¦°à¦¿à¦¸à§‡à¦Ÿ à¦•à¦°à§à¦¨"},Chinese:{winMessage:"èŽ·èƒœ!",drawMessage:"å¹³å±€!",computerWinMessage:"è®¡ç®—æœº (X) èŽ·èƒœ!",scoreLabel:"çŽ©å®¶: {playerWins} - è®¡ç®—æœº: {computerWins}",resetGame:"é‡ç½®æ¸¸æˆ"},Hindi:{winMessage:"à¤œà¥€à¤¤à¤¤à¤¾ à¤¹à¥ˆ!",drawMessage:"à¤¡à¥à¤°à¤¾ à¤¹à¥ˆ!",computerWinMessage:"à¤•à¤‚à¤ªà¥à¤¯à¥‚à¤Ÿà¤° (X) à¤œà¥€à¤¤à¤¤à¤¾ à¤¹à¥ˆ!",scoreLabel:"à¤–à¤¿à¤²à¤¾à¤¡à¤¼à¥€: {playerWins} - à¤•à¤‚à¤ªà¥à¤¯à¥‚à¤Ÿà¤°: {computerWins}",resetGame:"à¤–à¥‡à¤² à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚"},Japanese:{winMessage:"å‹ã¡ã¾ã—ãŸ!",drawMessage:"å¼•ãåˆ†ã‘ã§ã™!",computerWinMessage:"ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ (X) ãŒå‹ã¡ã¾ã—ãŸ!",scoreLabel:"ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼: {playerWins} - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿: {computerWins}",resetGame:"ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ"},Korean:{winMessage:"ì´ê²¼ìŠµë‹ˆë‹¤!",drawMessage:"ë¬´ìŠ¹ë¶€ìž…ë‹ˆë‹¤!",computerWinMessage:"ì»´í“¨í„° (X) ì´ê²¼ìŠµë‹ˆë‹¤!",scoreLabel:"í”Œë ˆì´ì–´: {playerWins} - ì»´í“¨í„°: {computerWins}",resetGame:"ê²Œìž„ ìž¬ì„¤ì •"},Marathi:{winMessage:"à¤œà¤¿à¤‚à¤•à¤¤à¥‹!",drawMessage:"à¤¡à¥à¤°à¤¾ à¤†à¤¹à¥‡!",computerWinMessage:"à¤•à¤‚à¤ªà¥à¤¯à¥à¤Ÿà¤° (X) à¤œà¤¿à¤‚à¤•à¤¤à¥‹!",scoreLabel:"à¤–à¥‡à¤³à¤¾à¤¡à¥‚: {playerWins} - à¤¸à¤‚à¤—à¤£à¤•: {computerWins}",resetGame:"à¤–à¥‡à¤³ à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¤¾"},Telugu:{winMessage:"à°œà°¯à°¿à°¸à±à°¤à°¾à°¡à±!",drawMessage:"à°‡à°¦à°¿ à°¸à°®à°¾à°¨à°‚à°—à°¾ à°‰à°‚à°¦à°¿!",computerWinMessage:"à°•à°‚à°ªà±à°¯à±‚à°Ÿà°°à± (X) à°œà°¯à°¿à°¸à±à°¤à°¾à°¡à±!",scoreLabel:"à°†à°¡à°¨à°¾à°¡à±: {playerWins} - à°•à°‚à°ªà±à°¯à±‚à°Ÿà°°à±: {computerWins}",resetGame:"à°—à±‡à°®à± à°°à±€à°¸à±†à°Ÿà± à°šà±‡à°¯à°‚à°¡à°¿"},French:{winMessage:"gagne!",drawMessage:"C'est un match nul!",computerWinMessage:"Ordinateur (X) gagne!",scoreLabel:"Joueur: {playerWins} - Ordinateur: {computerWins}",resetGame:"RÃ©initialiser le jeu"},Dutch:{winMessage:"wint!",drawMessage:"Het is gelijkspel!",computerWinMessage:"Computer (X) wint!",scoreLabel:"Speler: {playerWins} - Computer: {computerWins}",resetGame:"Spel opnieuw instellen"},Swedish:{winMessage:"vinner!",drawMessage:"Det Ã¤r oavgjort!",computerWinMessage:"Datorn (X) vinner!",scoreLabel:"Spelare: {playerWins} - Dator: {computerWins}",resetGame:"Ã…terstÃ¤ll spelet"},Turkish:{winMessage:"kazandÄ±!",drawMessage:"Beraberlik!",computerWinMessage:"Bilgisayar (X) kazandÄ±!",scoreLabel:"Oyuncu: {playerWins} - Bilgisayar: {computerWins}",resetGame:"Oyunu sÄ±fÄ±rla"}},l=e=>{const t=(()=>{const e=localStorage.getItem("selectedLanguage")||"English";return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})();console.log("Retrieved language:",t),console.log("Available languages:",Object.keys(d));const n=d[t]&&d[t][e];return console.log("Translation found:",n),n||d.English[e]||e},c=e=>{const t=document.querySelector(".notificationed"),n=l(e);t.textContent=n,t.classList.add("show"),setTimeout((()=>{t.classList.remove("show")}),8e3)},m=()=>{const t=r();o.forEach(((n,a)=>{const o=e[a];o.className=`cell ${n.toLowerCase()}`,"O"===n?t?(o.style.backgroundImage=`url(${t})`,o.style.backgroundSize="cover",o.style.backgroundPosition="center",o.textContent=""):(o.style.backgroundImage="",o.textContent="O"):"X"===n?(o.style.backgroundImage="url(logo.png)",o.textContent=""):(o.style.backgroundImage="",o.textContent="")})),u()},u=()=>{document.querySelector(".score .result").textContent=`${i} - ${s}`};document.querySelector(".score button").addEventListener("click",(()=>{i=0,s=0,u(),f()}));const g=(e,t)=>{const n=e.map(((e,t)=>""===e?t:null)).filter((e=>null!==e)),a=(e,t)=>{const n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const a of n){const[n,o,i]=a;if(e[n]===t&&e[n]===e[o]&&e[n]===e[i])return!0}return!1};if(a(e,"O"))return{score:-10};if(a(e,"X"))return{score:10};if(0===n.length)return{score:0};const o=[];for(let a=0;a<n.length;a++){const i={};if(i.index=n[a],e[n[a]]=t,"X"===t){const t=g(e,"O");i.score=t.score}else{const t=g(e,"X");i.score=t.score}e[n[a]]="",o.push(i)}let i;if("X"===t){let e=-1e4;for(let t=0;t<o.length;t++)o[t].score>e&&(e=o[t].score,i=t)}else{let e=1e4;for(let t=0;t<o.length;t++)o[t].score<e&&(e=o[t].score,i=t)}return o[i]},h=()=>{const e=g(o,"X");o[e.index]="X",m(),p("X")?(s++,c("computerWinMessage"),setTimeout((()=>{f()}),3e3)):o.includes("")?a=n:(c("drawMessage"),setTimeout((()=>{f()}),3e3))},p=t=>{const n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const a of n){const[n,i,s]=a;if(o[n]===t&&o[n]===o[i]&&o[n]===o[s])return e[n].classList.add("win"),e[i].classList.add("win"),e[s].classList.add("win"),!0}return!1},f=()=>{a=n,o=["","","","","","","","",""],m(),e.forEach((e=>{e.classList.remove("win"),e.textContent="",m()}))};e.forEach(((e,t)=>{e.addEventListener("click",(()=>(e=>{""===o[e]&&a===n&&(o[e]="O",m(),p("O")?(i++,c("winMessage"),setTimeout((()=>{f()}),3e3)):o.includes("")?(a="X",setTimeout(h,500)):(c("drawMessage"),setTimeout((()=>{f()}),3e3)))})(t)))})),m();(()=>{const e=document.getElementById("player-img"),t=r();e.src=t||""})()})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("friend-form"),t=document.getElementById("friend-name"),n=document.getElementById("friend-image"),a=document.getElementById("friend-emotion"),o=document.getElementById("friend-description"),i=document.getElementById("add-friend-button"),s=document.getElementById("image-previews"),r=document.getElementById("friends-list"),d=document.getElementById("count"),l=document.getElementById("magic-view"),c=(document.querySelector(".appreciation-list"),document.getElementById("friend-count-notification"));let m=[];function u(){i.disabled=!(t.value.trim()&&n.files.length&&"none"!==a.value&&o.value.trim())}function g(){const t=r.children.length;d.textContent=t,c.innerHTML="";const n=document.createElement("span");n.classList.add("count-span"),n.textContent=t;const a=document.createElement("span");if(n.classList.add("message-span"),a.setAttribute("data-translate","friends created out of 100"),a.textContent=" friends created out of 100",c.appendChild(n),c.appendChild(a),c.classList.add("show"),setTimeout((()=>{c.classList.remove("show")}),1e4),t>=100){e.style.display="none",c.innerHTML="";const n=document.createElement("span");n.classList.add("count-span"),n.textContent=t;const a=document.createElement("span");limitReachedMessageSpan.classList.add("message-span"),a.setAttribute("data-translate","created friends and reached the limit"),a.textContent=" friends created and reached the limit",c.appendChild(n),c.appendChild(a),c.classList.add("show"),setTimeout((()=>{c.classList.remove("show")}),15e3)}t<5?(l.classList.add("disabled"),l.textContent="Create more friends to go to magic world"):(l.classList.remove("disabled"),l.textContent="Go to magic view")}function h(){localStorage.setItem("friends",JSON.stringify(m))}function p(){r.innerHTML="",m.forEach(((e,t)=>{const{name:n,image:a,emotion:o,description:i}=e,s=document.createElement("li");s.classList.add("friend-item"),s.innerHTML=`\n                <div class="friend-number">#${t+1}</div>\n                <img src="${a}" alt="${n}">\n                <div class="friend-details">\n                    <h4>${n}</h4>\n                    <p><strong data-translate = "Emotion:"  style ="color:#0056b3;">Emotion:</strong> <b  data-translate="${o}">${o}</b></p>\n                    <p><b>${i}</b></p>\n                </div>\n                 <div class="friend-actions">\n                    <i class="fas fa-arrow-up ${0===t?"disabled":""}" onclick="moveUp(${t})"></i>\n                    <i class="fas fa-arrow-down ${t===m.length-1?"disabled":""}" onclick="moveDown(${t})"></i>\n                    <i class="fas fa-exchange-alt" onclick="showRanking(${t})"></i>\n                    <i class="fas fa-edit" onclick="editFriend(${t})"></i>\n                    <i class="fas fa-trash" onclick="deleteFriend(${t})"></i>\n            </div>\n            `,r.appendChild(s)})),g()}e.addEventListener("input",u),n.addEventListener("change",(()=>{const e=n.files[0];if(e){const t=new FileReader;t.onload=()=>{s.innerHTML=`<img src="${t.result}" alt="Image Preview">`},t.readAsDataURL(e)}else s.innerHTML="";u()})),window.moveUp=function(e){if(e>0){const t=document.querySelectorAll(".friend-item");t[e].style.transform="translateY(-100%)",t[e-1].style.transform="translateY(100%)",setTimeout((()=>{const n=m[e-1];m[e-1]=m[e],m[e]=n,h(),p(),t.forEach((e=>e.style.transform=""))}),500)}},window.moveDown=function(e){if(e<m.length-1){const t=document.querySelectorAll(".friend-item");t[e].style.transform="translateY(100%)",t[e+1].style.transform="translateY(-100%)",setTimeout((()=>{const n=m[e+1];m[e+1]=m[e],m[e]=n,h(),p(),t.forEach((e=>e.style.transform=""))}),500)}},window.showRanking=function(e){const t=document.createElement("div");t.classList.add("ranking-container");const n=document.createElement("div");n.classList.add("ranking-list");const a=document.createElement("div");a.classList.add("close-ranking-button"),a.innerHTML="&times;",a.onclick=()=>t.remove(),m.forEach(((t,a)=>{const o=document.createElement("div");o.classList.add("rank-item"),a===e&&o.classList.add("current-rank"),o.textContent=a+1,o.onclick=()=>changeRank(e,a),n.appendChild(o)})),n.appendChild(a),t.appendChild(n),document.body.appendChild(t)},window.changeRank=function(e,t){const n=m.splice(e,1)[0];m.splice(t,0,n),h(),p(),document.querySelector(".ranking-container").remove()},e.addEventListener("submit",(r=>{r.preventDefault();const d=t.value.trim(),l=n.files[0],c=a.value,u=o.value.trim(),g=new FileReader;g.onload=()=>{const t=g.result;m.push({name:d,image:t,emotion:c,description:u}),h(),p(),f(),e.reset(),s.innerHTML="",i.disabled=!0},g.readAsDataURL(l)}));const f=()=>{const e=document.getElementById("appreciation-list");e.innerHTML="",m.forEach((t=>{const n=document.createElement("div");n.classList.add("appreciation-item");const a=document.createElement("img");a.src=t.image,a.alt=t.name;const o=document.createElement("span");o.classList.add("friend-name"),o.textContent=t.name;const i=document.createElement("span");i.classList.add("thank-you-message"),i.setAttribute("data-translate","Thank you!"),i.textContent="Thank you!";const s=document.createElement("span");s.classList.add("thumbs-up"),s.innerHTML='\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">\n                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>\n                </svg>\n            ';const r=document.createElement("div");r.classList.add("thankyou-text"),r.appendChild(o),r.appendChild(i),r.appendChild(s),n.appendChild(a),n.appendChild(r),e.appendChild(n),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})),g()};!function(){const e=document.getElementById("appreciation-list"),t=JSON.parse(localStorage.getItem("friends"))||[];e.innerHTML="",t.forEach((t=>{const n=document.createElement("div");n.classList.add("appreciation-item");const a=document.createElement("img");a.src=t.image,a.alt=t.name;const o=document.createElement("span");o.classList.add("friend-name"),o.textContent=t.name;const i=document.createElement("span");i.setAttribute("data-translate","Thank you!"),i.textContent="Thank you!";const s=document.createElement("div");s.classList.add("thankyou-container"),s.innerHTML=`${i.outerHTML} \n            <span class="thumbs-up">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">\n                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>\n                </svg>\n            </span>\n            `,n.appendChild(a),n.appendChild(o),n.appendChild(s),n.addEventListener("click",(()=>{const e=document.createElement("div");e.classList.add("ping-div"),e.style.backgroundImage=`url(${t.image})`,document.body.appendChild(e),e.addEventListener("animationend",(()=>{document.body.removeChild(e)}))})),e.appendChild(n)}))}(),window.editFriend=function(e){const t=m[e],n=document.createElement("div");n.classList.add("edit-form-container");const a=document.createElement("form");a.classList.add("edit-form"),a.innerHTML=`\n            <h3 data-translate = "Edit Friend">Edit Friend</h3>\n            <div class="form-group">\n                <label for="edit-name" data-translate="Your Friend Name:">Name:</label>\n                <input type="text" id="edit-name" name="edit-name" value="${t.name}" required>\n            </div>\n            <div class="form-group">\n                <label for="edit-image" data-translate="Your Friend Image:">Image:</label>\n                <input type="file" id="edit-image" name="edit-image" accept="image/*">\n                <div id="edit-image-preview"><img src="${t.image}" alt="Image Preview"></div>\n            </div>\n            <div class="form-group">\n                <label for="edit-emotion" data-translate="Emotion:">Emotion:</label>\n                <select id="edit-emotion" name="edit-emotion" required>\n                   <option value="none" disabled selected data-translate="How do you feel about your friend">How do you feel about your friend</option>\n                    <option value="Joyful" data-translate="Joyful"> Joyful</option>\n                    <option value="Grateful" data-translate="Grateful"> Grateful</option>\n                    <option value="Excited" data-translate="Excited"> Excited</option>\n                    <option value="Inspired" data-translate="Inspired"> Inspired</option>\n                    <option value="Supportive" data-translate="Supportive"> Supportive</option>\n                    <option value="Amused" data-translate="Amused"> Amused</option>\n                    <option value="Comforted" data-translate="Comforted"> Comforted</option>\n                    <option value="Appreciative" data-translate="Appreciative"> Appreciative</option>\n                    <option value="Lovely" data-translate="Lovely"> Lovely</option>\n                    <option value="Cherished" data-translate="Cherished"> Cherished</option>\n                </select>\n            </div>\n            <div class="form-group">\n                <label for="edit-description" data-translate="Description:">Description:</label>\n                <textarea id="edit-description" name="edit-description" required>${t.description}</textarea>\n            </div>\n            <div class="form-actions">\n                <button type="button" id="edit-close" data-translate = "Cancel">Cancel</button>\n                <button type="submit" data-translate= "Done">Done</button>\n            </div>\n        `,n.appendChild(a),r.replaceChild(n,r.children[e]);const o=a.querySelector("#edit-image"),i=a.querySelector("#edit-image-preview img");o.addEventListener("change",(()=>{const e=o.files[0];if(e){const t=new FileReader;t.onload=()=>{i.src=t.result},t.readAsDataURL(e)}else i.src=t.image})),a.addEventListener("submit",(e=>{if(e.preventDefault(),t.name=a.querySelector("#edit-name").value.trim(),t.emotion=a.querySelector("#edit-emotion").value,t.description=a.querySelector("#edit-description").value.trim(),o.files.length>0){const e=new FileReader;e.onload=()=>{t.image=e.result,h(),p()},e.readAsDataURL(o.files[0])}else h(),p();window.location.reload()}));document.getElementById("edit-close").onclick=()=>{p(),location.reload()}},window.deleteFriend=function(e){const t=document.createElement("div");t.classList.add("confirmation-overlay"),t.innerHTML='\n            <div class="confirmation-box">\n                <p data-translate="Are you sure you want to delete this friend?">Are you sure you want to delete this friend?</p>\n                <div class="confirmation-buttons">\n                    <button class="confirm-button" data-translate="Yes">Yes</button>\n                    <button class="cancel-button" data-translate="No">No</button>\n                </div>\n            </div>\n        ',document.body.appendChild(t);const n=t.querySelector(".confirm-button"),a=t.querySelector(".cancel-button");n.addEventListener("click",(()=>{m.splice(e,1),r.querySelectorAll(".friend-item").forEach(((e,t)=>{e.querySelector(".friend-number").textContent=`#${t+1}`})),h(),t.remove(),p(),window.location.reload()})),a.addEventListener("click",(()=>{t.remove()}))},function(){const e=localStorage.getItem("friends");e&&(m=JSON.parse(e),friendIndex=m.length,p())}()})),document.addEventListener("DOMContentLoaded",(function(){const e=["Joyful","Grateful","Excited","Inspired","Supportive","Amused","Comforted","Appreciative","Lovely","Cherished"];document.getElementById("close-button").addEventListener("click",(function(){document.getElementById("emotion-correct-div").classList.remove("show"),location.reload()})),function(){const t=JSON.parse(localStorage.getItem("friends"))||[],n=t.filter((t=>!e.includes(t.emotion)));n.length>0&&function(e,t){const n=document.getElementById("emotion-correct-div"),a=document.getElementById("friend-list"),o=document.getElementById("friend-template").content;a.innerHTML="",e.forEach((e=>{const n=o.cloneNode(!0),i=n.querySelector(".friend-image"),s=n.querySelector(".friend-name"),r=n.querySelector(".emotion-select");i.src=e.image,s.textContent=e.name,r.value=e.emotion,r.addEventListener("change",(function(){const n=this.value,a=t.findIndex((t=>t.name===e.name));t[a].emotion=n,localStorage.setItem("friends",JSON.stringify(t))})),a.appendChild(n)})),n.classList.add("show")}(n,t)}()})),document.addEventListener("DOMContentLoaded",(()=>{const e=JSON.parse(localStorage.getItem("friends")),t=document.getElementById("quiz-question"),n=document.querySelector(".friend-listing"),a=document.querySelector(".result-div");let o=new Map,i=["Who will have the cutest baby between?","Who is most likely to be a superhero?","Who would make the best chef?","Who is the funniest?","Who would survive a zombie apocalypse?","Who is the most likely to become a millionaire?","Who is the best storyteller?","Who would make the best reality TV star?","Who has the most adventurous spirit?","Who is the best at giving advice?","Who would make the best travel blogger?","Who has the most contagious laugh?","Who is the most likely to start a successful business?","Who is the best dancer?","Who has the best taste in music?","Who would win in a karaoke competition?","Who is the most likely to write a bestseller?","Who would be the best at organizing a surprise party?","Who is the most stylish?","Who has the best cooking skills?","Who would make the best movie director?","Who is the most likely to run a marathon?","Who has the most unique talent?","Who would be the best at solving a mystery?","Who is the most likely to volunteer for a good cause?"];function s(){if(0===i.length)return a.innerHTML='<h4 data-translate="Quiz Complete!">Quiz Complete!</h4>',void document.querySelectorAll(".friend-image").forEach((e=>{e.style.pointerEvents="none",e.style.opacity="0.6",e.style.cursor="not-allowed"}));const e=Math.floor(Math.random()*i.length),n=i[e];i.splice(e,1),t.textContent=n,t.setAttribute("data-translate",n)}function r(){e.forEach((i=>{const r=document.createElement("img");r.src=i.image,r.alt=i.name,r.title=i.name,r.classList.add("friend-image"),r.addEventListener("click",(()=>function(n,i){o.has(n.name)||o.set(n.name,[]);const r=o.get(n.name);r.push(t.getAttribute("data-translate")),1===r.length?i.classList.add("selected"):2===r.length?i.classList.add("second-selection"):3===r.length&&(i.classList.remove("second-selection"),i.classList.add("third-selection"),i.style.pointerEvents="none");s(),function(){const t=[];o.forEach(((n,a)=>{const o=e.find((e=>e.name===a)).image;n.forEach((e=>{t.push(`\n                    <div class="result-item">\n                        <img src="${o}" alt="${a}" style="width: 50px; height: 50px; border-radius: 50%;">\n                        <div class="tooltip" data-translate="${e}">${e}</div>\n                    </div>`)}))})),a.innerHTML=`<h4 ">${t.length}</h4><div>${t.join("")}</div>`}()}(i,r)));const d=document.createElement("div");d.classList.add("tick-overlay"),d.textContent="âœ”",r.appendChild(d),n.appendChild(r)}))}s(),r()})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("wheel"),t=document.getElementById("centerImage"),n=document.getElementById("spinButton"),a=document.getElementById("resultImage"),o=document.getElementById("questions"),i=document.getElementById("question-answerred"),s=document.getElementById("spinSound"),r=JSON.parse(localStorage.getItem("myself"))||{image:"logo.png"};r&&r.image&&(t.src=r.image);const d=JSON.parse(localStorage.getItem("friends"))||[],l=d.map((e=>e.image)),c=d.map((e=>e.name)),m=l.length;let u=360/m;m<=4&&(u=360/m),l.forEach(((t,n)=>{const a=document.createElement("div"),o=document.createElement("div");o.classList.add("image-container"),a.classList.add("segment"),a.style.transform=`rotate(${n*u}deg) skewY(-${90-u}deg)`;const i=document.createElement("img");i.src=t,i.alt=`Friend ${n+1}`,o.appendChild(i),a.appendChild(o),e.appendChild(a)}));const g=["Which friend is likely to miss you the most?","Which friend loves you the most?","Which friend hugs the most?","Which friend has the best smile?","Which friend would you call first in an emergency?","Which friend makes you laugh the hardest?","Which friend has the most interesting stories?","Which friend is the most adventurous?","Which friend is the best cook?","Which friend is the most stylish?","Which friend would you trust with your deepest secrets?","Which friend is the most generous?","Which friend has the best advice?","Which friend is the most creative?","Which friend is the most likely to become famous?","Which friend would you want by your side on a deserted island?","Which friend is the best dancer?","Which friend has the best taste in music?","Which friend is the most reliable?","Which friend is the best at keeping surprises?","Which friend would make the best travel companion?","Which friend has the funniest jokes?","Which friend is the most tech-savvy?","Which friend would you want to be your partner in a game show?","Which friend has the most contagious laugh?"];n.addEventListener("click",(function(){n.disabled=!0,o.innerHTML="",i.innerHTML="",s.currentTime=0,s.play();const t=Math.floor(Math.random()*m),r=3600*(Math.random()<.5?1:-1)+t*u;e.style.transition="transform 2s ease-out",e.style.transform=`rotate(${r}deg)`,setTimeout((()=>{const t=-r;e.style.transition="transform 2s ease-out",e.style.transform=`rotate(${t}deg)`}),2e3),setTimeout((()=>{const e=g[Math.floor(Math.random()*g.length)];o.setAttribute("data-translate",e),o.innerHTML=`${e}`}),4e3),setTimeout((()=>{s.pause();const e=c[t];i.innerHTML=`${e}`,a.src=l[t]}),6e3),setTimeout((()=>{n.disabled=!1}),5e3)}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("friend-listing"),t=document.getElementById("potion"),n=document.getElementById("message"),a=document.querySelector(".brew-button"),o=document.querySelector(".reset-button");(JSON.parse(localStorage.getItem("friends"))||[]).forEach((t=>{const n=document.createElement("div");n.classList.add("friend"),n.dataset.name=t.name;const a=document.createElement("img");a.src=t.image,a.alt=t.name,n.appendChild(a),e.appendChild(n),n.addEventListener("click",(()=>{!function(e,t){if(i.length<2||e.classList.contains("selected")){e.classList.toggle("selected");const n=document.createElement("div");n.classList.add("pulse-ping"),n.innerHTML=`<span>${t}</span>`,e.appendChild(n),setTimeout((()=>{n.remove()}),1e3),e.classList.contains("selected")?i.push(t):i=i.filter((e=>e!==t)),document.querySelectorAll(".friend").forEach((e=>{e.classList.contains("selected")||2!==i.length?e.style.pointerEvents="auto":e.style.pointerEvents="none"}))}}(n,t.name)}))}));let i=[];a.addEventListener("click",(()=>{if(2===i.length){let[e,a]=i;n.innerHTML="";let o=0;const s=setInterval((()=>{n.innerHTML=`<i class="fas fa-sync fa-spin"></i> <span>${i[o%2]}</span>`,o++}),500);setTimeout((()=>{clearInterval(s);const n=e.substring(0,Math.ceil(e.length/2))+a.substring(Math.floor(a.length/2));t.innerHTML=`<i class="fas fa-heart" style="font-size: 30px; color: #0056b3"></i> <span "combined-result>${n}</span>`}),3e3)}else n.innerHTML='<i class="fas fa-exclamation-circle"></i>'})),o.addEventListener("click",(()=>{i=[],document.querySelectorAll(".friend").forEach((e=>{e.classList.remove("selected"),e.style.pointerEvents="auto"})),n.innerHTML="",t.innerHTML='<i class="fas fa-flask"></i>'}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("fileUpload"),t=document.getElementById("userImage"),n=document.getElementById("songList"),a=document.getElementById("friendImage"),o=document.getElementById("songTitle"),i=document.getElementById("audioPlayer"),s=document.getElementById("audioSpectrum"),r=document.getElementById("musicSymbolsContainer"),d=JSON.parse(localStorage.getItem("myself")),l=d?d.image:"logo.png";l&&(t.src=l);const c=(JSON.parse(localStorage.getItem("friends"))||[]).map((e=>e.image)),m=JSON.parse(sessionStorage.getItem("songs"))||[];function u(e,t){const s=document.createElement("li");s.textContent=e,s.addEventListener("click",(()=>{!function(e,t){o.textContent=e,i.src=t,i.load(),i.play().then((()=>{const e=c[Math.floor(Math.random()*c.length)];a.src=e,g("Music Playing...","info")})).catch((t=>{console.error("Error playing song:",t);const a=n.getElementsByTagName("li");Array.from(a).forEach((t=>{if(t.textContent===e){t.remove();const n=m.findIndex((t=>t.name===e));-1!==n&&m.splice(n,1)}})),g(`Failed to play '${e}'. Song data was lost.`,"error")}))}(e,t)})),n.appendChild(s)}function g(e,t="info"){const n=document.getElementById("notification");n.textContent=e,n.className=`notification ${t}`,setTimeout((()=>{n.textContent="",n.className="notification"}),1e4)}function h(){for(;r.firstChild;)r.removeChild(r.firstChild)}e.addEventListener("change",(e=>{const t=e.target.files;for(const e of t){const t=new FileReader;t.onload=t=>{const n=t.target.result;u(e.name,n),m.push({name:e.name,url:n}),sessionStorage.setItem("songs",JSON.stringify(m))},t.readAsDataURL(e)}})),m.forEach((e=>{u(e.name,e.url)})),i.addEventListener("playing",(()=>{!function(){for(let e=0;e<30;e++){const e=document.createElement("div");e.textContent="â™ª",e.classList.add("music-symbol");const t=Math.random()*window.innerWidth,n=5*Math.random();e.style.left=t-10+"px",e.style.animationDelay=`${n}s`,r.appendChild(e),e.addEventListener("animationend",(()=>{e.remove()}))}}()})),i.addEventListener("pause",(()=>{h()})),i.addEventListener("ended",(()=>{h()}));const p=new(window.AudioContext||window.webkitAudioContext),f=p.createAnalyser();p.createMediaElementSource(i).connect(f),f.connect(p.destination);const y=document.createElement("canvas");s.appendChild(y);const v=y.getContext("2d");function w(){y.width=s.clientWidth,y.height=s.clientHeight}window.addEventListener("resize",w),w(),function e(){requestAnimationFrame(e);const t=new Uint8Array(f.frequencyBinCount);f.getByteFrequencyData(t),v.clearRect(0,0,y.width,y.height);const n=y.width/t.length*2.5;let a,o=0;for(let e=0;e<t.length;e++){a=t[e]/2;const i=Math.floor(256*Math.random()),s=Math.floor(256*Math.random()),r=Math.floor(256*Math.random());v.fillStyle=`rgb(${i}, ${s}, ${r})`,v.fillRect(o,y.height-a,n,a),o+=n+1}}()})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("scroll-notification"),t=JSON.parse(localStorage.getItem("friends"))||[],n=document.querySelector(".scoreboard"),a=document.getElementById("home");function o(){window.scrollY>n.offsetTop&&(window.scrollTo(0,n.offsetTop),e.classList.add("visible"),setTimeout((()=>{e.classList.remove("visible")}),6e3))}function i(){return a&&a.classList.contains("active")}i()&&0===t.length||i()&&t.length<=1?(window.addEventListener("scroll",o),document.body.style.overflow="hidden"):document.body.style.overflow="auto",document.querySelectorAll("nav a").forEach((e=>{e.addEventListener("click",(()=>{setTimeout((()=>{i()&&0===t.length?(window.addEventListener("scroll",o),document.body.style.overflow="hidden"):(window.removeEventListener("scroll",o),document.body.style.overflow="auto")}),100)}))}))})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then((()=>console.log("Service worker registered"))).catch((e=>console.log("Service worker registration failed:",e))),window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),deferredPrompt=e;const t=document.getElementById("install-button"),n=document.getElementById("cancel-button");"true"!==localStorage.getItem("pwa-installed")&&"true"!==localStorage.getItem("pwa-install-prompt-cancelled")&&(t.classList.remove("hiddened"),n.classList.remove("hiddened"))})),document.getElementById("install-button").addEventListener("click",(()=>{deferredPrompt&&(deferredPrompt.prompt(),deferredPrompt.userChoice.then((e=>{"accepted"===e.outcome&&localStorage.setItem("pwa-installed","true"),deferredPrompt=null,hideInstallButtons()})))})),document.getElementById("cancel-button").addEventListener("click",(()=>{deferredPrompt&&(deferredPrompt.prompt(),deferredPrompt.userChoice.then((e=>{"accepted"===e.outcome&&localStorage.setItem("pwa-installed","true"),deferredPrompt=null,hideInstallButtons()}))),localStorage.setItem("pwa-install-prompt-cancelled","true"),hideInstallButtons()})),window.addEventListener("load",(()=>{"true"===localStorage.getItem("pwa-installed")?hideInstallButtons():"true"!==localStorage.getItem("pwa-install-prompt-cancelled")&&showInstallButtons()})),window.addEventListener("load",checkOnlineStatus),window.addEventListener("online",checkOnlineStatus),window.addEventListener("offline",checkOnlineStatus),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("magic-video"),t=document.getElementById("play-intro-button"),n=document.querySelector(".progress-bar"),a=document.querySelector(".waiting-loader"),o=[{video:"magic-arab.mp4",language:"arabic"},{video:"magic-bengali.mp4",language:"bengali"},{video:"magic-chinese.mp4",language:"chinese"},{video:"magic-dutch.mp4",language:"dutch"},{video:"magic-english.mp4",language:"english"},{video:"magic-french.mp4",language:"french"},{video:"magic-german.mp4",language:"german"},{video:"magic-greek.mp4",language:"greek"},{video:"magic-hindi.mp4",language:"hindi"},{video:"magic-italian.mp4",language:"italian"},{video:"magic-japanese.mp4",language:"japanese"},{video:"magic-korean.mp4",language:"korean"},{video:"magic-marathi.mp4",language:"marathi"},{video:"magic-portuguese.mp4",language:"portuguese"},{video:"magic-russian.mp4",language:"russian"},{video:"magic-spanish.mp4",language:"spanish"},{video:"magic-swedish.mp4",language:"swedish"},{video:"magic-telegu.mp4",language:"telugu"},{video:"magic-turkish.mp4",language:"turkish"}],i=document.getElementById("visit-link"),s=document.getElementById("notification-user");!function(){const t=localStorage.getItem("selectedLanguage")||"english",n=o.find((e=>e.language===t));e.src=n?n.video:"magic5.mp4"}(),t.addEventListener("click",(function(){e.paused?(e.play(),t.innerHTML="&#10074;&#10074;"):(e.pause(),t.innerHTML="&#9658;")})),e.addEventListener("timeupdate",(function(){const t=e.currentTime/e.duration*100;n.style.width=`${t}%`})),e.addEventListener("ended",(function(){t.innerHTML="&#9658;"})),e.addEventListener("waiting",(function(){a.style.display="flex"})),e.addEventListener("stalled",(function(){a.style.display="flex"})),e.addEventListener("canplay",(function(){a.style.display="none"})),e.addEventListener("playing",(function(){a.style.display="none"})),i.addEventListener("click",(function(t){t.preventDefault(),s.setAttribute("data-translate","Don't forget to come back, friend!"),s.textContent="Don't forget to come back, friend!",e.pause(),s.classList.add("visible"),setTimeout((function(){window.open(i.href,"_blank","noopener noreferrer"),s.classList.remove("visible")}),3e3)}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("mic-button"),t=document.getElementById("song-container"),n=document.getElementById("song-list"),a=document.getElementById("captured-words-overlay"),o=document.getElementById("captured-words"),i=document.getElementById("audioPlayer"),s=document.getElementById("magic-video");let r=null,d=null,l=null,c=null;const m=navigator.language||"en-US";function u(){r?g():navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{r=e,function(){const e=window.SpeechRecognition||window.webkitSpeechRecognition;e?(l=new e,l.continuous=!0,l.interimResults=!0,l.lang=m,l.onresult=e=>{let t="ðŸŽµ ";for(let n=e.resultIndex;n<e.results.length;n++)e.results[n].isFinal&&(t+=e.results[n][0].transcript.trim()+" ðŸŽµ ");"none"===window.getComputedStyle(a).display?(o.textContent="",o.classList.remove("show-transcript"),l.stop()):(o.textContent=t,o.classList.add("show-transcript"),c&&clearTimeout(c),c=setTimeout((()=>{o.setAttribute("data-translate","ðŸŽµ waiting for you ... ðŸŽµ"),o.textContent="ðŸŽµ waiting for you ... ðŸŽµ"}),5e3))},l.onerror=e=>{console.error("Speech recognition error:",e.error)},l.onend=()=>{l&&l.start()},l.start()):alert("Speech recognition is not supported in this browser.")}(),t.style.display="block",window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})).catch((e=>{alert("Microphone access is required to use this feature.")})),i.pause(),s.pause()}function g(){r&&(r.getTracks().forEach((e=>e.stop())),r=null,t.style.display="none",a.style.display="none",e.classList.remove("recording"),d&&(d.pause(),d.currentTime=0),l&&(l.stop(),l=null))}e.addEventListener("click",(()=>{u()})),n.addEventListener("click",(n=>{const i=n.target;if("LI"===i.tagName){!function(t){a.style.display="flex",e.classList.add("recording"),d=new Audio(t),d.volume=.8,d.play(),d.onended=()=>{g()},d.addEventListener("loadedmetadata",(()=>{o.textContent="ðŸŽµ Loading your song... ðŸŽµ"})),d.addEventListener("stalled",(()=>{o.textContent="ðŸŽµ Just a moment please... ðŸŽµ"})),d.addEventListener("playing",(()=>{o.textContent="ðŸŽµ It's Karaoke time... ðŸŽµ"}))}(i.getAttribute("data-song")),t.style.display="none"}})),document.getElementById("karaoke-song").addEventListener("change",(e=>{const t=e.target;if(t.files.length>0){const e=t.files[0];if("audio/mpeg"===e.type){const t=URL.createObjectURL(e),a=e.name,o=document.createElement("li");o.setAttribute("data-song",t),o.textContent=a,n.appendChild(o)}else alert("Please select an MP3 file.");t.value=""}}))})),document.addEventListener("DOMContentLoaded",(()=>{async function e(e){try{const t=await fetch(`${e}.json`);if(!t.ok)throw new Error("Network response was not ok.");return await t.json()}catch(e){return console.error("Error fetching translations:",e),{}}}function t(e){document.querySelectorAll("[data-translate]").forEach((t=>{const n=t.getAttribute("data-translate");e[n]&&(t.textContent=e[n])}))}function n(n){const a=n.target.getAttribute("data-language"),o=document.getElementById("worldIcon");a?(console.log(`Selected language: ${a}`),localStorage.setItem("selectedLanguage",a),e(a).then((e=>{t(e),languageDiv.classList.add("hidden")}))):(console.warn("No data-language attribute found on clicked element."),o.textContent="ðŸŒ"),location.reload()}const a=localStorage.getItem("selectedLanguage");a&&e(a).then((e=>{t(e)})),function(){const e=document.getElementById("languageDiv"),t=document.querySelector(".close-btn"),a=document.getElementById("worldIcon");localStorage.getItem("languageDivShown")||(e.classList.remove("hidden"),localStorage.setItem("languageDivShown","true")),t.addEventListener("click",(()=>{e.classList.add("hidden")})),a.addEventListener("click",(()=>{e.classList.toggle("hidden")})),document.querySelectorAll("#languageDiv ul li").forEach((e=>{e.addEventListener("click",n)}))}(),setInterval((function(){const n=localStorage.getItem("selectedLanguage");n&&e(n).then((e=>{t(e)}))}),500)}));
