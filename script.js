function getFriendsFromLocalStorage(){const e=localStorage.getItem("friends");return e?JSON.parse(e):[]}function displayFriends(){const e=document.getElementById("friend-listing");e.innerHTML="";const t=getFriendsFromLocalStorage();t.forEach(t=>{const n=document.createElement("div");n.classList.add("ingredient"),n.innerText=t.name,n.onclick=(()=>selectIngredient(t.name,n)),e.appendChild(n)})}function selectIngredient(e,t){(selectedFriends.length<2||selectedFriends.includes(e))&&(selectedFriends.includes(e)?(selectedFriends.splice(selectedFriends.indexOf(e),1),t.classList.remove("selected")):(selectedFriends.push(e),t.classList.add("selected")),selectedFriends.length<2&&document.querySelectorAll(".ingredient.disabled").forEach(e=>{e.onclick=(()=>selectIngredient(e.innerText,e)),e.classList.remove("disabled")}),2===selectedFriends.length&&document.querySelectorAll(".ingredient").forEach(e=>{selectedFriends.includes(e.innerText)||(e.onclick=null,e.classList.add("disabled"))}))}function updatePotionDisplay(){document.getElementById("potion").innerText="Your potion will appear here!",document.getElementById("message").innerText=""}function brewPotion(){if(selectedFriends.length<2)return void(document.getElementById("message").innerText="Please select at least two friends!");const e=generateBabyName(selectedFriends[0],selectedFriends[1]);document.getElementById("potion").innerHTML=`👶 Baby name: ${e}`,document.getElementById("message").innerText="Potion successfully brewed!"}function generateBabyName(e,t){const n=e.split(" ")[0].substring(0,3),o=t.split(" ")[1]?t.split(" ")[1].substring(0,3):t.substring(0,3),i=`${n}${o}`.toLowerCase(),a=i.charAt(0).toUpperCase()+i.slice(1);return a}function resetGame(){selectedFriends.length=0,displayFriends(),updatePotionDisplay()}function getFriendsFromLocalStorage(){const e=localStorage.getItem("friends");return e?JSON.parse(e):[]}function displayQuizFriends(){const e=document.getElementById("quiz-friend-listing");e.innerHTML="";const t=getFriendsFromLocalStorage();t.forEach(t=>{const n=document.createElement("div");n.classList.add("ingredient"),n.innerText=t.name,n.onclick=(()=>selectQuizIngredient(t.name,n)),e.appendChild(n)})}function selectQuizIngredient(e,t){(quizGameSelectedFriends.length<2||quizGameSelectedFriends.includes(e))&&(quizGameSelectedFriends.includes(e)?(quizGameSelectedFriends.splice(quizGameSelectedFriends.indexOf(e),1),t.classList.remove("selected")):(quizGameSelectedFriends.push(e),t.classList.add("selected")),quizGameSelectedFriends.length<2&&document.querySelectorAll(".ingredient.disabled").forEach(e=>{e.onclick=(()=>selectQuizIngredient(e.innerText,e)),e.classList.remove("disabled")}),2===quizGameSelectedFriends.length&&document.querySelectorAll(".ingredient").forEach(e=>{quizGameSelectedFriends.includes(e.innerText)||(e.onclick=null,e.classList.add("disabled"))}))}function updateQuizDisplay(){document.getElementById("quiz-result").innerText="Your answer will appear here!",document.getElementById("quiz-message").innerText=""}function nextQuestion(){const e=questions[Math.floor(Math.random()*questions.length)];document.getElementById("quiz-question").innerText=e,updateQuizDisplay(),resetQuiz()}function brewQuiz(){if(quizGameSelectedFriends.length<2)return void(document.getElementById("quiz-message").innerText="Please select at least two friends!");const e=quizGameSelectedFriends[Math.floor(Math.random()*quizGameSelectedFriends.length)];document.getElementById("quiz-result").innerHTML=`🎉 Winner: ${e}`,document.getElementById("quiz-message").innerText="Result generated!"}function resetQuiz(){quizGameSelectedFriends.length=0,displayQuizFriends(),updateQuizDisplay()}function hideInstallButtons(){const e=document.getElementById("install-button"),t=document.getElementById("cancel-button");e.classList.add("hiddened"),t.classList.add("hiddened")}function showInstallButtons(){const e=document.getElementById("install-button"),t=document.getElementById("cancel-button");e.classList.remove("hiddened"),t.classList.remove("hiddened")}function checkOnlineStatus(){navigator.onLine||(window.location.href="popup.html")}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.getElementById("magicload").style.display="none",document.body.style.overflow="auto"},2e3)}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("nav ul li a[data-tooltip]");e.forEach(e=>{e.addEventListener("mouseover",()=>{e.classList.add("show-tooltip")}),e.addEventListener("mouseout",()=>{e.classList.remove("show-tooltip")})})}),document.getElementById("menu").addEventListener("click",function(){document.querySelector(".floating-nav").classList.toggle("show-menu")}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("nav ul li a"),t=document.querySelectorAll(".section");e.forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const i=n.getAttribute("href").substring(1);localStorage.setItem("activeSection",i),window.location.reload(),e.forEach(e=>e.classList.remove("active")),n.classList.add("active"),t.forEach(e=>{e.id===i?e.classList.add("active"):e.classList.remove("active")})})});const n=localStorage.getItem("activeSection")||"home";t.forEach(e=>{e.id===n?e.classList.add("active"):e.classList.remove("active")}),e.forEach(e=>{e.getAttribute("href").substring(1)===n?e.classList.add("active"):e.classList.remove("active")})}),document.addEventListener("DOMContentLoaded",function(){function e(){d||r||setTimeout(()=>{i.style.display="block",setTimeout(()=>{n("Magical Friend partners in friendship with Facebook, bringing magical moments to your social networking experience.",s)},1e3)},2e3)}function t(){i.style.display="none",s.textContent="",d=!1,r=!1}function n(e,t){function n(){o<e.length?(t.textContent+=e.charAt(o),o++,setTimeout(n,50)):(d=!1,r=!0)}d=!0;let o=0;n()}const o=document.getElementById("logo-magical-friend"),i=document.getElementById("about-magical-friend"),a=document.querySelector(".about-magical-friend .about-close"),s=document.getElementById("about-text");let d=!1,r=!1;o.addEventListener("mouseenter",e),o.addEventListener("touchstart",e),a.addEventListener("click",t)}),document.addEventListener("DOMContentLoaded",()=>{function e(e){a.style.display="none",c.style.display="none";const t=document.querySelector('nav ul li a[href="#Profile"]'),n=document.querySelector('nav ul li a[href="#Profile"] img');t.innerHTML=`<img src="${e.image}" alt="${e.facebookName}">`,n.src=e.image,r.innerHTML=`<li><a href="#Profile" data-tooltip="Me"><img src="${e.image}" alt="${e.facebookName}"></a></li>`}function t(e){const t=document.querySelector('nav ul li a[href="#Profile"]');t.innerHTML=`<img src="${e.image}" alt="${e.facebookName}">`}function n(e){l.innerHTML=`\n        <button id="edit-profile">Edit Profile</button>\n        <h2>${e.facebookName}</h2>\n        <img src="${e.image}" alt="${e.facebookName}">\n        <p>${e.bio}</p>\n        <button id="log-out">Log Out</button>\n        `;const t=document.getElementById("edit-profile");t.addEventListener("click",()=>{o(e)});const n=document.getElementById("log-out");n.addEventListener("click",function(){localStorage.clear(),alert("You have been logged out."),location.reload()})}function o(e){l.innerHTML=`\n        <div class="owner-form-container">\n            <h3>Edit Profile</h3>\n            <form id="edit-profile-form">\n            <div class="form-group">\n                <label for="edit-facebook-name">Facebook Name</label>\n                <input type="text" id="edit-facebook-name" name="edit-facebook-name" value="${e.facebookName}" required>\n            </div>\n            <div class="form-group">\n                <label for="edit-image">Profile Picture</label>\n                <input type="file" id="edit-image" name="edit-image" accept="image/*">\n                <div class="image-overview" id="edit-image-preview"></div>\n            </div>\n            <div class="form-group">\n                <label for="edit-bio">Bio</label>\n                <textarea id="edit-bio" name="edit-bio" rows="4" required>${e.bio}</textarea>\n            </div>\n            <div class="button-group">\n                <button type="button" id="cancel-edit">Cancel</button>\n                <button type="submit" id="save-edit">Save</button>\n            </div>\n            </form>\n        </div>\n        `;const t=document.getElementById("cancel-edit");t.addEventListener("click",()=>{n(e)});const o=document.getElementById("edit-image"),a=document.getElementById("edit-image-preview");o.addEventListener("change",()=>{const e=o.files[0];if(e){const t=new FileReader;t.onload=(()=>{a.innerHTML=`<img src="${t.result}" alt="Image Preview">`}),t.readAsDataURL(e)}});const s=document.getElementById("edit-profile-form");s.addEventListener("submit",t=>{t.preventDefault(),i(e),window.location.reload()})}function i(t){const o=document.getElementById("edit-facebook-name").value,i=document.getElementById("edit-bio").value,a=document.getElementById("edit-image").files[0];if(a){const t=new FileReader;t.readAsDataURL(a),t.onload=(()=>{const a={facebookName:o,image:t.result,bio:i};localStorage.setItem("myself",JSON.stringify(a)),e(a),n(a)})}else{const a={facebookName:o,image:t.image,bio:i};localStorage.setItem("myself",JSON.stringify(a)),e(a),n(a)}}const a=document.getElementById("owner-form"),s=document.getElementById("image"),d=document.getElementById("image-preview"),r=document.getElementById("owner-details"),l=document.getElementById("Profile"),c=document.querySelector(".owner-form-container"),m=localStorage.getItem("myself");if(m){const o=JSON.parse(m);e(o),t(o),n(o)}else l.innerHTML="<h2>No Profile Yet</h2>";a.addEventListener("submit",o=>{o.preventDefault();const i=document.getElementById("facebook-name").value,a=document.getElementById("bio").value,d=s.files[0];if(d){const o=new FileReader;o.readAsDataURL(d),o.onload=(()=>{const s={facebookName:i,bio:a,image:o.result};localStorage.setItem("myself",JSON.stringify(s)),e(s),t(s),n(s),window.location.reload()})}}),s.addEventListener("change",()=>{const e=s.files[0];if(e){const t=new FileReader;t.onload=(()=>{d.innerHTML=`<img src="${t.result}" alt="Image Preview">`}),t.readAsDataURL(e)}})}),document.addEventListener("DOMContentLoaded",()=>{function e(){i.disabled=!0,fetch("https://api.quotable.io/random").then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{e&&e.content?o(e.content):t()}).catch(e=>{console.error("Error fetching quote:",e),t()}).finally(()=>{i.disabled=!1})}function t(){const e=document.getElementById("quote-text");e.textContent="No quote available. Check out our FAQs!";const t=[{question:"What is Magical Friend?",answer:"Magical Friend is a unique interactive experience where you can create and customize animated cubes with images of your friends, accompanied by music and animations."},{question:"How can I create a Magical Friend?",answer:"To create a Magical Friend, simply upload images of your friends and customize the animated cubes using our intuitive interface. Add music and animations to make it truly magical!"},{question:"Is Magical Friend associated with Facebook?",answer:"No, Magical Friend is a standalone web application. While you can upload images from your device, there is no direct integration with Facebook or any other social media platform."},{question:"Can I share my Magical Friend creations?",answer:"Yes, you can share your Magical Friend creations by downloading them as videos or images. Share them with your friends and family to spread the magic!"},{question:"Is there a cost to use Magical Friend?",answer:"Magical Friend is completely free to use! Enjoy creating and sharing magical moments with your friends without any costs."},{question:"Can I save my Magical Friend creations?",answer:"Yes, you can save your Magical Friend creations locally on your device. This allows you to revisit and edit them whenever you like."},{question:"Are there limits to how many friends' images I can use?",answer:"There are no strict limits on the number of friends' images you can use. However, the performance may vary based on the number and size of images."},{question:"Can I customize the animations and music in my Magical Friend?",answer:"Absolutely! Magical Friend offers customization options for animations and music. You can choose from a selection of themes and music tracks to suit your creation."},{question:"Is Magical Friend suitable for children?",answer:"Yes, Magical Friend is designed to be family-friendly and suitable for users of all ages. It provides a safe and creative environment for expressing friendship."},{question:"How often are new features added to Magical Friend?",answer:"We strive to continuously improve Magical Friend by adding new features and enhancements. Stay tuned for updates and exciting new capabilities!"}],o=document.createElement("div");o.classList.add("faq-container"),t.forEach(e=>{const t=document.createElement("div");t.classList.add("faq-item");const i=document.createElement("div");i.classList.add("faq-question"),i.textContent=e.question;const a=document.createElement("div");a.classList.add("faq-answer"),a.textContent=e.answer,a.style.display="none",i.addEventListener("click",()=>{a.style.display="none"===a.style.display?"block":"none",n(a)}),t.appendChild(i),t.appendChild(a),o.appendChild(t)}),e.appendChild(o)}function n(e){function t(){o<n.length&&(e.textContent+=n.charAt(o),o++,setTimeout(t,i))}const n=e.textContent;e.textContent="";let o=0;const i=50;t()}function o(e){function t(){o<e.length?(n.textContent+=e.charAt(o),o++,setTimeout(t,a)):i.disabled=!1}const n=document.getElementById("quote-text");n.textContent="";let o=0;const a=50;t()}const i=document.getElementById("new-quote-btn");e(),i.addEventListener("click",e)}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".tic-tac-toe .cell"),t=JSON.parse(localStorage.getItem("myself")),n=t?t.facebookName:"Player";let o=n,i=["","","","","","","","",""],a=0,s=0,d=!0;const r=()=>t?t.image:null,l=e=>{const t=document.querySelector(".notificationed");t.textContent=e,t.classList.add("show"),setTimeout(()=>{t.classList.remove("show")},5e3)},c=e=>{""===i[e]&&o===n&&(i[e]="O",m(),y("O")?(a++,l(`${o} wins!`),setTimeout(()=>{v()},2e3)):i.includes("")?(o="X",setTimeout(p,500)):(l("It's a draw!"),setTimeout(()=>{v()},2e3)))},m=()=>{const t=r(),n=d?"logo.png":"magic5.png";i.forEach((o,i)=>{const a=e[i];a.className=`cell ${o.toLowerCase()}`,"O"===o?t?(a.style.backgroundImage=`url(${t})`,a.style.backgroundSize="cover",a.style.backgroundPosition="center",a.textContent=""):(a.style.backgroundImage="",a.textContent="O"):"X"===o?(a.style.backgroundImage=`url(${n})`,a.textContent=""):(a.style.backgroundImage="",a.textContent="")}),u()},u=()=>{const e=document.querySelector(".score .result");e.textContent=`Player: ${a} - Computer: ${s}`},g=()=>{a=0,s=0,u(),v()},h=document.querySelector(".score button");h.addEventListener("click",g);const f=(e,t)=>{const n=e.map((e,t)=>""===e?t:null).filter(e=>null!==e),o=(e,t)=>{const n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const o of n){const[n,i,a]=o;if(e[n]===t&&e[n]===e[i]&&e[n]===e[a])return!0}return!1};if(o(e,"O"))return{score:-10};if(o(e,"X"))return{score:10};if(0===n.length)return{score:0};const i=[];for(let o=0;o<n.length;o++){const a={};if(a.index=n[o],e[n[o]]=t,"X"===t){const t=f(e,"O");a.score=t.score}else{const t=f(e,"X");a.score=t.score}e[n[o]]="",i.push(a)}let a;if("X"===t){let e=-1e4;for(let t=0;t<i.length;t++)i[t].score>e&&(e=i[t].score,a=t)}else{let e=1e4;for(let t=0;t<i.length;t++)i[t].score<e&&(e=i[t].score,a=t)}return i[a]},p=()=>{const e=f(i,"X");i[e.index]="X",m(),y("X")?(s++,l("Computer (X) wins!"),setTimeout(()=>{v()},2e3)):i.includes("")?o=n:(l("It's a draw!"),setTimeout(()=>{v()},2e3))},y=t=>{const n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const o of n){const[n,a,s]=o;if(i[n]===t&&i[n]===i[a]&&i[n]===i[s])return e[n].classList.add("win"),e[a].classList.add("win"),e[s].classList.add("win"),!0}return!1},v=()=>{o=n,i=["","","","","","","","",""],m(),e.forEach(e=>{e.classList.remove("win"),e.textContent="",m()})};e.forEach((e,t)=>{e.addEventListener("click",()=>c(t))}),m();const w=()=>{const e=document.getElementById("player-img"),t=r();e.src=t||""};w()}),document.addEventListener("DOMContentLoaded",()=>{function e(){m.disabled=!(d.value.trim()&&r.files.length&&"none"!==l.value&&c.value.trim())}function t(){const e=g.children.length;h.textContent=e,e<5?(f.classList.add("disabled"),f.textContent="Create more friends to go to magic world"):(f.classList.remove("disabled"),f.textContent="Go to magic view")}function n(){const e=localStorage.getItem("friends");e&&(y=JSON.parse(e),friendIndex=y.length,i())}function o(){localStorage.setItem("friends",JSON.stringify(y))}function i(){g.innerHTML="",y.forEach((e,t)=>{const{name:n,image:o,emotion:i,description:a}=e,s=document.createElement("li");s.classList.add("friend-item"),s.innerHTML=`\n                <div class="friend-number">#${t+1}</div>\n                <img src="${o}" alt="${n}">\n                <div class="friend-details">\n                    <h4>${n}</h4>\n                    <p><strong>Emotion:</strong> <b>${i}</b></p>\n                    <p><b>${a}</b></p>\n                </div>\n                 <div class="friend-actions">\n                    <i class="fas fa-arrow-up ${0===t?"disabled":""}" onclick="moveUp(${t})"></i>\n                    <i class="fas fa-arrow-down ${t===y.length-1?"disabled":""}" onclick="moveDown(${t})"></i>\n                    <i class="fas fa-exchange-alt" onclick="showRanking(${t})"></i>\n                    <i class="fas fa-edit" onclick="editFriend(${t})"></i>\n                    <i class="fas fa-trash" onclick="deleteFriend(${t})"></i>\n            </div>\n            `,g.appendChild(s)}),t()}function a(){const e=document.getElementById("appreciation-list"),t=JSON.parse(localStorage.getItem("friends"))||[];e.innerHTML="",t.forEach(t=>{const n=document.createElement("div");n.classList.add("appreciation-item");const o=document.createElement("img");o.src=t.image,o.alt=t.name;const i=document.createElement("div");i.classList.add("thankyou-text"),i.innerHTML=`${t.name},  Thank you! <span class="thumbs-up">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">\n                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>\n            </svg>\n            </span>\n            `,n.appendChild(o),n.appendChild(i),e.appendChild(n)})}const s=document.getElementById("friend-form"),d=document.getElementById("friend-name"),r=document.getElementById("friend-image"),l=document.getElementById("friend-emotion"),c=document.getElementById("friend-description"),m=document.getElementById("add-friend-button"),u=document.getElementById("image-previews"),g=document.getElementById("friends-list"),h=document.getElementById("count"),f=document.getElementById("magic-view"),p=document.querySelector(".appreciation-list");let y=[];s.addEventListener("input",e),r.addEventListener("change",()=>{const t=r.files[0];if(t){const e=new FileReader;e.onload=(()=>{u.innerHTML=`<img src="${e.result}" alt="Image Preview">`}),e.readAsDataURL(t)}else u.innerHTML="";e()}),window.moveUp=function(e){if(e>0){const t=document.querySelectorAll(".friend-item");t[e].style.transform="translateY(-100%)",t[e-1].style.transform="translateY(100%)",setTimeout(()=>{const n=y[e-1];y[e-1]=y[e],y[e]=n,o(),i(),t.forEach(e=>e.style.transform="")},500)}},window.moveDown=function(e){if(e<y.length-1){const t=document.querySelectorAll(".friend-item");t[e].style.transform="translateY(100%)",t[e+1].style.transform="translateY(-100%)",setTimeout(()=>{const n=y[e+1];y[e+1]=y[e],y[e]=n,o(),i(),t.forEach(e=>e.style.transform="")},500)}},window.showRanking=function(e){const t=document.createElement("div");t.classList.add("ranking-container");const n=document.createElement("div");n.classList.add("ranking-list");const o=document.createElement("div");o.classList.add("close-ranking-button"),o.innerHTML="&times;",o.onclick=(()=>t.remove()),y.forEach((t,o)=>{const i=document.createElement("div");i.classList.add("rank-item"),o===e&&i.classList.add("current-rank"),i.textContent=o+1,i.onclick=(()=>changeRank(e,o)),n.appendChild(i)}),n.appendChild(o),t.appendChild(n),document.body.appendChild(t)},window.changeRank=function(e,t){const n=y.splice(e,1)[0];y.splice(t,0,n),o(),i(),document.querySelector(".ranking-container").remove()},s.addEventListener("submit",e=>{e.preventDefault();const t=d.value.trim(),n=r.files[0],a=l.value,g=c.value.trim(),h=new FileReader;h.onload=(()=>{const e=h.result;y.push({name:t,image:e,emotion:a,description:g}),o(),i(),v(),s.reset(),u.innerHTML="",m.disabled=!0}),h.readAsDataURL(n)});const v=()=>{p.innerHTML="",y.forEach(e=>{const t=document.createElement("div");t.classList.add("appreciation-item");const n=document.createElement("img");n.src=e.image,n.alt=e.name;const o=document.createElement("div");o.classList.add("thankyou-text"),o.innerHTML=`${e.name},  Thank you! <span class="thumbs-up">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">\n                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>\n            </svg>\n            </span>\n            `,t.appendChild(n),t.appendChild(o),p.appendChild(t),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})};a(),window.editFriend=function(e){const t=y[e],n=document.createElement("div");n.classList.add("edit-form-container");const a=document.createElement("form");a.classList.add("edit-form"),a.innerHTML=`\n            <h3>Edit Friend</h3>\n            <div class="form-group">\n                <label for="edit-name">Name:</label>\n                <input type="text" id="edit-name" name="edit-name" value="${t.name}" required>\n            </div>\n            <div class="form-group">\n                <label for="edit-image">Image:</label>\n                <input type="file" id="edit-image" name="edit-image" accept="image/*">\n                <div id="edit-image-preview"><img src="${t.image}" alt="Image Preview"></div>\n            </div>\n            <div class="form-group">\n                <label for="edit-emotion">Emotion:</label>\n                <select id="edit-emotion" name="edit-emotion" required>\n                   <option value="none" disabled selected>How do you feel about your friend</option>\n                    <option value="joyful">😊 Joyful</option>\n                    <option value="grateful">🙏 Grateful</option>\n                    <option value="excited">😃 Excited</option>\n                    <option value="inspired">🌟 Inspired</option>\n                    <option value="supported">🤗 Supportive</option>\n                    <option value="amused">😄 Amused</option>\n                    <option value="comforted">💖 Comforted</option>\n                    <option value="appreciative">👏 Appreciative</option>\n                    <option value="lovely">😍 Lovely</option>\n                    <option value="cherished">💝 Cherished</option>\n                </select>\n            </div>\n            <div class="form-group">\n                <label for="edit-description">Description:</label>\n                <textarea id="edit-description" name="edit-description" required>${t.description}</textarea>\n            </div>\n            <div class="form-actions">\n                <button type="button" id="edit-close">Cancel</button>\n                <button type="submit">Done</button>\n            </div>\n        `,n.appendChild(a),g.replaceChild(n,g.children[e]);const s=a.querySelector("#edit-image"),d=a.querySelector("#edit-image-preview img");s.addEventListener("change",()=>{const e=s.files[0];if(e){const t=new FileReader;t.onload=(()=>{d.src=t.result}),t.readAsDataURL(e)}else d.src=t.image}),a.addEventListener("submit",e=>{if(e.preventDefault(),t.name=a.querySelector("#edit-name").value.trim(),t.emotion=a.querySelector("#edit-emotion").value,t.description=a.querySelector("#edit-description").value.trim(),s.files.length>0){const e=new FileReader;e.onload=(()=>{t.image=e.result,o(),i()}),e.readAsDataURL(s.files[0])}else o(),i();window.location.reload()});const r=document.getElementById("edit-close");r.onclick=(()=>{i()})},window.deleteFriend=function(e){function t(){const e=g.querySelectorAll(".friend-item");e.forEach((e,t)=>{const n=e.querySelector(".friend-number");n.textContent=`#${t+1}`})}const n=document.createElement("div");n.classList.add("confirmation-overlay"),n.innerHTML='\n            <div class="confirmation-box">\n                <p>Are you sure you want to delete this friend?</p>\n                <div class="confirmation-buttons">\n                    <button class="confirm-button">Yes</button>\n                    <button class="cancel-button">No</button>\n                </div>\n            </div>\n        ',document.body.appendChild(n);const a=n.querySelector(".confirm-button"),s=n.querySelector(".cancel-button");a.addEventListener("click",()=>{y.splice(e,1),t(),o(),n.remove(),i(),window.location.reload()}),s.addEventListener("click",()=>{n.remove()})},n()});const selectedFriends=[];displayFriends();const quizGameSelectedFriends=[],questions=["Who will have the cutest baby between?","Who is most likely to be a superhero?","Who would make the best chef?","Who is the funniest?","Who would survive a zombie apocalypse?","Who is the most likely to become a millionaire?","Who is the best storyteller?","Who would make the best reality TV star?","Who has the most adventurous spirit?","Who is the best at giving advice?","Who would make the best travel blogger?","Who has the most contagious laugh?","Who is the most likely to start a successful business?","Who is the best dancer?","Who has the best taste in music?","Who would win in a karaoke competition?","Who is the most likely to write a bestseller?","Who would be the best at organizing a surprise party?","Who is the most stylish?","Who has the best cooking skills?","Who would make the best movie director?","Who is the most likely to run a marathon?","Who has the most unique talent?","Who would be the best at solving a mystery?","Who is the most likely to volunteer for a good cause?"];let deferredPrompt;displayQuizFriends(),nextQuestion(),document.addEventListener("DOMContentLoaded",()=>{function e(){o.disabled=!0,s.currentTime=0,s.play();const e=Math.floor(Math.random()*g),n=Math.random()<.5?1:-1,d=3600*n+e*h;t.style.transition="transform 2s ease-out",t.style.transform=`rotate(${d}deg)`,setTimeout(()=>{const e=-d;t.style.transition="transform 2s ease-out",t.style.transform=`rotate(${e}deg)`},2e3),setTimeout(()=>{s.pause();const t=u[e],n=f[Math.floor(Math.random()*f.length)];a.innerHTML=`${n} <span>${t}</span>`,i.src=m[e]},4e3),setTimeout(()=>{o.disabled=!1},5e3)}const t=document.getElementById("wheel"),n=document.getElementById("centerImage"),o=document.getElementById("spinButton"),i=document.getElementById("resultImage"),a=document.getElementById("questions"),s=document.getElementById("spinSound"),d="myself",r=JSON.parse(localStorage.getItem(d))||{image:"logo.png"};r&&r.image&&(n.src=r.image);const l="friends",c=JSON.parse(localStorage.getItem(l))||[],m=c.map(e=>e.image),u=c.map(e=>e.name),g=m.length;let h=360/g;g<=4&&(h=360/g),m.forEach((e,n)=>{const o=document.createElement("div"),i=document.createElement("div");i.classList.add("image-container"),o.classList.add("segment"),o.style.transform=`rotate(${n*h}deg) skewY(-${90-h}deg)`;const a=document.createElement("img");a.src=e,a.alt=`Friend ${n+1}`,i.appendChild(a),o.appendChild(i),t.appendChild(o)});const f=["Which friend is likely to miss you the most?","Which friend loves you the most?","Which friend hugs the most?","Which friend has the best smile?","Which friend would you call first in an emergency?","Which friend makes you laugh the hardest?","Which friend has the most interesting stories?","Which friend is the most adventurous?","Which friend is the best cook?","Which friend is the most stylish?","Which friend would you trust with your deepest secrets?","Which friend is the most generous?","Which friend has the best advice?","Which friend is the most creative?","Which friend is the most likely to become famous?","Which friend would you want by your side on a deserted island?","Which friend is the best dancer?","Which friend has the best taste in music?","Which friend is the most reliable?","Which friend is the best at keeping surprises?","Which friend would make the best travel companion?","Which friend has the funniest jokes?","Which friend is the most tech-savvy?","Which friend would you want to be your partner in a game show?","Which friend has the most contagious laugh?"];o.addEventListener("click",e)}),document.addEventListener("DOMContentLoaded",()=>{function e(e,n){const o=document.createElement("li");o.textContent=e,o.addEventListener("click",()=>{t(e,n)}),l.appendChild(o)}function t(e,t){m.textContent=e,u.src=t,u.load(),u.play().then(()=>{const e=v[Math.floor(Math.random()*v.length)];c.src=e,n("Music Playing...","info")}).catch(t=>{console.error("Error playing song:",t);const o=l.getElementsByTagName("li");Array.from(o).forEach(t=>{if(t.textContent===e){t.remove();const n=w.findIndex(t=>t.name===e);-1!==n&&w.splice(n,1)}}),n(`Failed to play '${e}'. Song data was lost.`,"error")})}function n(e,t="info"){const n=document.getElementById("notification");n.textContent=e,n.className=`notification ${t}`,setTimeout(()=>{n.textContent="",n.className="notification"},1e4)}function o(){const e=30;for(let t=0;t<e;t++){const e=document.createElement("div");e.textContent="♪",e.classList.add("music-symbol");const t=Math.random()*window.innerWidth,n=5*Math.random();e.style.left=`${t-10}px`,e.style.animationDelay=`${n}s`,h.appendChild(e),e.addEventListener("animationend",()=>{e.remove()})}}function i(){for(;h.firstChild;)h.removeChild(h.firstChild)}function a(){I.width=g.clientWidth,I.height=g.clientHeight}function s(){requestAnimationFrame(s);const e=new Uint8Array(E.frequencyBinCount);E.getByteFrequencyData(e),S.clearRect(0,0,I.width,I.height);const t=I.width/e.length*2.5;let n,o=0;for(let i=0;i<e.length;i++){n=e[i]/2;const a=Math.floor(256*Math.random()),s=Math.floor(256*Math.random()),d=Math.floor(256*Math.random());S.fillStyle=`rgb(${a}, ${s}, ${d})`,S.fillRect(o,I.height-n,t,n),o+=t+1}}const d=document.getElementById("fileUpload"),r=document.getElementById("userImage"),l=document.getElementById("songList"),c=document.getElementById("friendImage"),m=document.getElementById("songTitle"),u=document.getElementById("audioPlayer"),g=document.getElementById("audioSpectrum"),h=document.getElementById("musicSymbolsContainer"),f=JSON.parse(localStorage.getItem("myself")),p=f?f.image:"logo.png";p&&(r.src=p);const y=JSON.parse(localStorage.getItem("friends"))||[],v=y.map(e=>e.image),w=JSON.parse(sessionStorage.getItem("songs"))||[];d.addEventListener("change",t=>{const n=t.target.files;for(const t of n){const n=new FileReader;n.onload=(n=>{const o=n.target.result;e(t.name,o),w.push({name:t.name,url:o}),sessionStorage.setItem("songs",JSON.stringify(w))}),n.readAsDataURL(t)}}),w.forEach(t=>{e(t.name,t.url)}),u.addEventListener("playing",()=>{o()}),u.addEventListener("pause",()=>{i()}),u.addEventListener("ended",()=>{i()});const b=new(window.AudioContext||window.webkitAudioContext),E=b.createAnalyser(),L=b.createMediaElementSource(u);L.connect(E),E.connect(b.destination);const I=document.createElement("canvas");g.appendChild(I);const S=I.getContext("2d")
;window.addEventListener("resize",a),a(),s()}),document.addEventListener("DOMContentLoaded",()=>{function e(){window.scrollY>i.offsetTop&&(window.scrollTo(0,i.offsetTop),n.classList.add("visible"),setTimeout(()=>{n.classList.remove("visible")},6e3))}function t(){return a&&a.classList.contains("active")}const n=document.getElementById("scroll-notification"),o=JSON.parse(localStorage.getItem("friends"))||[],i=document.querySelector(".scoreboard"),a=document.getElementById("home");t()&&0===o.length||t()&&o.length<=1?(window.addEventListener("scroll",e),document.body.style.overflow="hidden"):document.body.style.overflow="auto",document.querySelectorAll("nav a").forEach(n=>{n.addEventListener("click",()=>{setTimeout(()=>{t()&&0===o.length?(window.addEventListener("scroll",e),document.body.style.overflow="hidden"):(window.removeEventListener("scroll",e),document.body.style.overflow="auto")},100)})})}),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then(()=>console.log("Service worker registered")).catch(e=>console.log("Service worker registration failed:",e)),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),deferredPrompt=e;const t=document.getElementById("install-button"),n=document.getElementById("cancel-button");"true"!==localStorage.getItem("pwa-installed")&&"true"!==localStorage.getItem("pwa-install-prompt-cancelled")&&(t.classList.remove("hiddened"),n.classList.remove("hiddened"))}),document.getElementById("install-button").addEventListener("click",()=>{deferredPrompt&&(deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{"accepted"===e.outcome&&localStorage.setItem("pwa-installed","true"),deferredPrompt=null,hideInstallButtons()}))}),document.getElementById("cancel-button").addEventListener("click",()=>{deferredPrompt&&(deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{"accepted"===e.outcome&&localStorage.setItem("pwa-installed","true"),deferredPrompt=null,hideInstallButtons()})),localStorage.setItem("pwa-install-prompt-cancelled","true"),hideInstallButtons()}),window.addEventListener("load",()=>{"true"===localStorage.getItem("pwa-installed")?hideInstallButtons():"true"!==localStorage.getItem("pwa-install-prompt-cancelled")&&showInstallButtons()}),window.addEventListener("load",checkOnlineStatus),window.addEventListener("online",checkOnlineStatus),window.addEventListener("offline",checkOnlineStatus);
